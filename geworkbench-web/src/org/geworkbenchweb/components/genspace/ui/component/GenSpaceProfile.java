package org.geworkbenchweb.components.genspace.ui.component;

import org.geworkbench.components.genspace.server.stubs.User;
import org.geworkbenchweb.components.genspace.GenSpaceServerFactory;
import org.geworkbenchweb.components.genspace.ui.GenSpaceComponent;

import com.vaadin.annotations.AutoGenerated;
import com.vaadin.ui.Button;
import com.vaadin.ui.CustomComponent;
import com.vaadin.ui.GridLayout;
import com.vaadin.ui.Label;
import com.vaadin.ui.TextField;
import com.vaadin.ui.Button.ClickEvent;

public class GenSpaceProfile extends CustomComponent implements GenSpaceTab{
	@AutoGenerated
	private GridLayout mainLayout;
	@AutoGenerated
	private Button btnLogOut;
	@AutoGenerated
	private Button btnSave;
	@AutoGenerated
	private TextField txtZipCode;
	@AutoGenerated
	private Label label_10;
	@AutoGenerated
	private TextField txtState;
	@AutoGenerated
	private Label label_9;
	@AutoGenerated
	private TextField txtCity;
	@AutoGenerated
	private Label label_8;
	@AutoGenerated
	private TextField txtAddress2;
	@AutoGenerated
	private Label label_7;
	@AutoGenerated
	private TextField txtAddress1;
	@AutoGenerated
	private Label label_6;
	@AutoGenerated
	private TextField txtPhone;
	@AutoGenerated
	private Label label_5;
	@AutoGenerated
	private TextField txtEmailAddress;
	@AutoGenerated
	private Label label_4;
	@AutoGenerated
	private TextField txtLabAffiliation;
	@AutoGenerated
	private Label label_3;
	@AutoGenerated
	private TextField txtLastName;
	@AutoGenerated
	private Label label_2;
	@AutoGenerated
	private TextField txtFirstName;
	@AutoGenerated
	private Label label_1;

	/*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

	

	/*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

	

	/*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

	

	/*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

	

	/*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

	@Override
	public void loggedIn() {
		User u = GenSpaceServerFactory.getUser();
		txtAddress1.setValue(u.getAddr1());
		txtAddress2.setValue(u.getAddr2());
		txtCity.setValue(u.getCity());
		txtEmailAddress.setValue(u.getEmail());
		txtFirstName.setValue(u.getFirstName());
		txtLastName.setValue(u.getLastName());
		txtLabAffiliation.setValue(u.getLabAffiliation());
		txtPhone.setValue(u.getPhone());
		txtState.setValue(u.getState());
		txtZipCode.setValue(u.getZipcode());
	}
	@Override
	public void loggedOut() {
		
	}
	@Override
	public void tabSelected() {
		
	}
	private GenSpaceComponent genSpaceComponent;
	public void setGenSpaceComponent(GenSpaceComponent genSpaceComponent) {
		this.genSpaceComponent = genSpaceComponent;
	}
	
	/**
	 * The constructor should first build the main layout, set the
	 * composition root and then do any custom initialization.
	 *
	 * The constructor will not be automatically regenerated by the
	 * visual editor.
	 */
	public GenSpaceProfile() {
		buildMainLayout();
		setCompositionRoot(mainLayout);

		 btnLogOut.addListener(new Button.ClickListener() {
						
			@Override
			public void buttonClick(ClickEvent event) {
				GenSpaceServerFactory.logout();
				genSpaceComponent.fireLoggedOut();
			}
		});
		 btnSave.addListener(new Button.ClickListener() {
			
			@Override
			public void buttonClick(ClickEvent event) {
				// TODO Auto-generated method stub
				User me = GenSpaceServerFactory.getUser();
				me.setAddr1((String) txtAddress1.getValue());
				me.setAddr2((String) txtAddress2.getValue());
				me.setCity((String) txtCity.getValue());
				me.setEmail((String) txtEmailAddress.getValue());
				me.setFirstName((String) txtFirstName.getValue());
				me.setLastName((String) txtLastName.getValue());
				me.setLabAffiliation((String) txtLabAffiliation.getValue());
				me.setPhone((String) txtPhone.getValue());
				me.setState((String) txtState.getValue());
				me.setZipcode((String) txtZipCode.getValue());
				GenSpaceServerFactory.getUserOps().updateUser(me);
			}
		});
	}

	@AutoGenerated
	private GridLayout buildMainLayout() {
		// common part: create layout
		mainLayout = new GridLayout();
		mainLayout.setImmediate(false);
		mainLayout.setWidth("-1px");
		mainLayout.setHeight("100%");
		mainLayout.setMargin(false);
		mainLayout.setColumns(2);
		mainLayout.setRows(11);
		
		// top-level component properties
		setWidth("-1px");
		setHeight("100.0%");
		
		// label_1
		label_1 = new Label();
		label_1.setImmediate(false);
		label_1.setWidth("-1px");
		label_1.setHeight("-1px");
		label_1.setValue("First Name");
		mainLayout.addComponent(label_1, 0, 0);
		
		// textField_1
		txtFirstName = new TextField();
		txtFirstName.setImmediate(false);
		txtFirstName.setWidth("-1px");
		txtFirstName.setHeight("-1px");
		txtFirstName.setSecret(false);
		mainLayout.addComponent(txtFirstName, 1, 0);
		
		// label_2
		label_2 = new Label();
		label_2.setImmediate(false);
		label_2.setWidth("-1px");
		label_2.setHeight("16px");
		label_2.setValue("Last Name");
		mainLayout.addComponent(label_2, 0, 1);
		
		// textField_2
		txtLastName = new TextField();
		txtLastName.setImmediate(false);
		txtLastName.setWidth("-1px");
		txtLastName.setHeight("-1px");
		txtLastName.setSecret(false);
		mainLayout.addComponent(txtLastName, 1, 1);
		
		// label_3
		label_3 = new Label();
		label_3.setImmediate(false);
		label_3.setWidth("-1px");
		label_3.setHeight("-1px");
		label_3.setValue("Lab Affiliation");
		mainLayout.addComponent(label_3, 0, 2);
		
		// textField_11
		txtLabAffiliation = new TextField();
		txtLabAffiliation.setImmediate(false);
		txtLabAffiliation.setWidth("-1px");
		txtLabAffiliation.setHeight("-1px");
		txtLabAffiliation.setSecret(false);
		mainLayout.addComponent(txtLabAffiliation, 1, 2);
		
		// label_4
		label_4 = new Label();
		label_4.setImmediate(false);
		label_4.setWidth("-1px");
		label_4.setHeight("-1px");
		label_4.setValue("Email Address");
		mainLayout.addComponent(label_4, 0, 3);
		
		// textField_12
		txtEmailAddress = new TextField();
		txtEmailAddress.setImmediate(false);
		txtEmailAddress.setWidth("-1px");
		txtEmailAddress.setHeight("-1px");
		txtEmailAddress.setSecret(false);
		mainLayout.addComponent(txtEmailAddress, 1, 3);
		
		// label_5
		label_5 = new Label();
		label_5.setImmediate(false);
		label_5.setWidth("-1px");
		label_5.setHeight("-1px");
		label_5.setValue("Phone");
		mainLayout.addComponent(label_5, 0, 4);
		
		// textField_13
		txtPhone = new TextField();
		txtPhone.setImmediate(false);
		txtPhone.setWidth("-1px");
		txtPhone.setHeight("-1px");
		txtPhone.setSecret(false);
		mainLayout.addComponent(txtPhone, 1, 4);
		
		// label_6
		label_6 = new Label();
		label_6.setImmediate(false);
		label_6.setWidth("-1px");
		label_6.setHeight("-1px");
		label_6.setValue("Address 1");
		mainLayout.addComponent(label_6, 0, 5);
		
		// textField_14
		txtAddress1 = new TextField();
		txtAddress1.setImmediate(false);
		txtAddress1.setWidth("-1px");
		txtAddress1.setHeight("-1px");
		txtAddress1.setSecret(false);
		mainLayout.addComponent(txtAddress1, 1, 5);
		
		// label_7
		label_7 = new Label();
		label_7.setImmediate(false);
		label_7.setWidth("-1px");
		label_7.setHeight("-1px");
		label_7.setValue("Address 2");
		mainLayout.addComponent(label_7, 0, 6);
		
		// textField_15
		txtAddress2 = new TextField();
		txtAddress2.setImmediate(false);
		txtAddress2.setWidth("-1px");
		txtAddress2.setHeight("-1px");
		txtAddress2.setSecret(false);
		mainLayout.addComponent(txtAddress2, 1, 6);
		
		// label_8
		label_8 = new Label();
		label_8.setImmediate(false);
		label_8.setWidth("-1px");
		label_8.setHeight("-1px");
		label_8.setValue("City");
		mainLayout.addComponent(label_8, 0, 7);
		
		// textField_16
		txtCity = new TextField();
		txtCity.setImmediate(false);
		txtCity.setWidth("-1px");
		txtCity.setHeight("-1px");
		txtCity.setSecret(false);
		mainLayout.addComponent(txtCity, 1, 7);
		
		// label_9
		label_9 = new Label();
		label_9.setImmediate(false);
		label_9.setWidth("-1px");
		label_9.setHeight("-1px");
		label_9.setValue("State");
		mainLayout.addComponent(label_9, 0, 8);
		
		// textField_17
		txtState = new TextField();
		txtState.setImmediate(false);
		txtState.setWidth("-1px");
		txtState.setHeight("-1px");
		txtState.setSecret(false);
		mainLayout.addComponent(txtState, 1, 8);
		
		// label_10
		label_10 = new Label();
		label_10.setImmediate(false);
		label_10.setWidth("-1px");
		label_10.setHeight("-1px");
		label_10.setValue("Zip Code");
		mainLayout.addComponent(label_10, 0, 9);
		
		// textField_18
		txtZipCode = new TextField();
		txtZipCode.setImmediate(false);
		txtZipCode.setWidth("-1px");
		txtZipCode.setHeight("-1px");
		txtZipCode.setSecret(false);
		mainLayout.addComponent(txtZipCode, 1, 9);
		
		// btnSave
		btnSave = new Button();
		btnSave.setCaption("Save");
		btnSave.setImmediate(false);
		btnSave.setWidth("-1px");
		btnSave.setHeight("-1px");
		mainLayout.addComponent(btnSave, 0, 10);
		
		// btnLogOut
		btnLogOut = new Button();
		btnLogOut.setCaption("Log Out");
		btnLogOut.setImmediate(false);
		btnLogOut.setWidth("-1px");
		btnLogOut.setHeight("-1px");
		mainLayout.addComponent(btnLogOut, 1, 10);
		
		return mainLayout;
	}

}
